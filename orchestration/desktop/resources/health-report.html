<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Health Report</title>
  <style>
    body{font-family: ui-sans-serif, system-ui; margin:0}
    header{padding:12px 16px; background:#0f172a; color:#fff; display:flex; align-items:center; justify-content:space-between}
    header h1{font-size:16px; margin:0}
    main{padding:16px}
    .ok{color:#16a34a}
    .warn{color:#f59e0b}
    .err{color:#dc2626}
    .sec{font-weight:600; margin-top:8px}
    pre{background:#f8fafc; border:1px solid #e5e7eb; padding:12px; white-space:pre-wrap}
    .actions{display:flex; gap:8px}
  </style>
  <script>
    async function colorize(text){
      const lines = (text || '').split('\n');
      const out = [];
      for(const line of lines){
        let cls = '';
        if(line.includes('✅')) cls = 'ok';
        else if(line.includes('❌')) cls = 'err';
        else if(line.includes('⚠️')) cls = 'warn';
        if(/^[^\w]*[\-–—]|🔍|🌐|📊|🖥️|🔧/.test(line)) out.push(`<div class="sec">${line}</div>`);
        else if(cls) out.push(`<div class="${cls}">${line}</div>`);
        else out.push(`<div>${line}</div>`);
      }
      return out.join('');
    }
    async function load(){
      const res = await window.HealthAPI.loadReport();
      const container = document.getElementById('report');
      container.innerHTML = await colorize(res || 'No report available');
    }
    async function copy(){
      const text = document.getElementById('report').innerText;
      await navigator.clipboard.writeText(text);
      alert('Copied');
    }
    window.onload = load;
  </script>
</head>
<body>
  <header>
    <h1>Health Report</h1>
    <div class="actions">
      <button onclick="copy()">Copy</button>
      <button onclick="window.close()">Close</button>
    </div>
  </header>
  <main>
    <div id="report"></div>
  </main>
</body>
</html>

