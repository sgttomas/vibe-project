
# Frontend Pre-commit Hook
# Runs linting, type checking, and documentation updates before commits

echo "🔍 Running pre-commit checks..."

# 1. Lint check
echo "📋 Checking code style..."
npm run lint
if [ $? -ne 0 ]; then
  echo "❌ Linting failed. Please fix lint errors before committing."
  exit 1
fi

# 2. Type check
echo "🔧 Checking TypeScript types..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "❌ Type checking failed. Please fix type errors before committing."
  exit 1
fi

# 3. Update documentation index
echo "📚 Updating documentation index..."
npm run update-docs-index
if [ $? -ne 0 ]; then
  echo "⚠️  Documentation index update failed, but continuing..."
fi

# 4. Add updated docs to commit if they were modified
if git diff --cached --quiet docs/FRONTEND_DOCUMENTATION_INDEX.md; then
  echo "📄 Documentation index unchanged"
else
  echo "📝 Adding updated documentation index to commit"
  git add docs/FRONTEND_DOCUMENTATION_INDEX.md
fi

echo "✅ Pre-commit checks passed!"
