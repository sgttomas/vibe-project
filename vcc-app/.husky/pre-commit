
# Frontend Pre-commit Hook
# Runs linting, type checking, and documentation updates before commits

echo "ğŸ” Running pre-commit checks..."

# 1. Lint check
echo "ğŸ“‹ Checking code style..."
npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ Linting failed. Please fix lint errors before committing."
  exit 1
fi

# 2. Type check
echo "ğŸ”§ Checking TypeScript types..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type checking failed. Please fix type errors before committing."
  exit 1
fi

# 3. Update documentation index
echo "ğŸ“š Updating documentation index..."
npm run update-docs-index
if [ $? -ne 0 ]; then
  echo "âš ï¸  Documentation index update failed, but continuing..."
fi

# 4. Add updated docs to commit if they were modified
if git diff --cached --quiet docs/FRONTEND_DOCUMENTATION_INDEX.md; then
  echo "ğŸ“„ Documentation index unchanged"
else
  echo "ğŸ“ Adding updated documentation index to commit"
  git add docs/FRONTEND_DOCUMENTATION_INDEX.md
fi

echo "âœ… Pre-commit checks passed!"
